# Deployment to Render.com

The following is a guide for deploying the AOC 2025 web showcase to Render.com with automatic GitHub deployments.

## Prerequisites

- GitHub account with your repository
- Render account (sign up at https://render.com)
- Your AOC session cookie

## CI/CD Pipeline

The deployment uses a two-stage pipeline:

```
Code Push → GitHub Actions (Build & Test) → Render.com (Deploy)
```

**GitHub Actions** validates the code before deployment:
- Type safety checks (pyright)
- Django system checks
- Migration validation
- Static file collection test

**Render.com** automatically deploys when checks pass.

## Deploy to Render

### 1. Create Render Account

Go to https://render.com and sign up (free).

### 2. Create New Web Service

1. Click "New +" → "Web Service"
2. Connect your GitHub account
3. Select your `advent-of-code-2025` repository
4. Render will auto-detect your `render.yaml`

### 3. Configure Service

Render will auto-fill from `render.yaml`, but verify:

- **Name**: aoc2025 (or your choice)
- **Environment**: Python
- **Build Command**: `./build.sh`
- **Start Command**: `uv run gunicorn --chdir src/aoc2025/web --bind 0.0.0.0:$PORT aoc2025.web.wsgi:application`
- **Instance Type**: Free

### 4. Set Environment Variables

Add these in the Render dashboard:

1. **DJANGO_SECRET_KEY** - Auto-generated by Render
2. **AOC_SESSION_COOKIE** - Your AOC session cookie
3. **DJANGO_DEBUG** - `False`
4. **ALLOWED_HOSTS** - Your render URL (e.g., `aoc2025.onrender.com`)

Click "Create Web Service"

## Step 3: Auto-Deploy is Already Set Up!

Render automatically deploys whenever you push to your main branch.

```bash
git add .
git commit -m "Deploy to Render"
git push origin main
```

Render will automatically:
1. Detect the push
2. Run your build script
3. Deploy the new version
4. Show you the logs in real-time

## Your App is Live!

The app will be available at: `https://app-name.onrender.com`

## Updating

Push to GitHub:

```bash
git add .
git commit -m "Update feature"
git push origin main
```

Render auto-deploys in ~2-3 minutes!

## Troubleshooting

### If the build fails

Check logs in dashboard. Common issues:
- Make sure `build.sh` is executable: `chmod +x build.sh`
- Verify `uv sync` works locally

### Static Files Not Loading

Everything is configured correctly with whitenoise!

### App Shows 502 Error

Check that `ALLOWED_HOSTS` includes your render domain in environment variables.
